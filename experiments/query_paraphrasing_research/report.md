# Отчет по эксперименту: Парафразирование запросов для улучшения поиска

## Цель

Проверить, улучшает ли генерация парафразов вопросов качество поиска релевантных ответов в базе знаний.

## Методология

**Baseline:**
- Прямой поиск по оригинальному вопросу через embedding модель
- Возврат топ-5 ответов

**Paraphrasing:**
- Генерация 5 парафразов через модель `cointegrated/rut5-base-paraphraser`
- Поиск топ-5 ответов для каждого парафраза
- Голосующая схема с позиционным взвешиванием для ранжирования
- Используются три score:
  - `avg_score` - средний score от Qdrant по всем парафразам (может быть ниже baseline, т.к. усредняет все вхождения)
  - `max_score` - максимальный score от Qdrant (для сравнения с baseline)
  - `ranking_score` - комбинированный score с позиционными весами (для ранжирования)

## Результаты

### Общая статистика

**Время выполнения (8 запросов):**
- Baseline: 4.0 сек (среднее 0.50 сек/запрос)
- Paraphrasing: 67.0 сек (среднее 8.4 сек/запрос)
- Замедление: 16.6x

**Найденные ответы:**
- Baseline: 31 уникальных ответов
- Paraphrasing: 34 уникальных ответов
- Общих: 27 ответов
- Новых от Paraphrasing: 7 ответов (ID: 10, 12, 49, 69, 70, 89, 98)

### Примеры улучшений

#### Пример 1: Вопрос про стажировку

**Вопрос:** "Можно ли будет стажировку ЦК зачесть в качестве обязательной производственной практики?"

**Baseline (топ-5):**
- ID 167 - про ассесменты (не релевантно)
- ID 21 - про заявку (не релевантно)
- ID 41, 109, 125 - про дипломы (не релевантно)

**Paraphrasing (топ-5):**
- ID 21, 167, 98, 109, 41
- ID 98 - новый ответ про сроки проведения стажировки (релевантно)

**Результат:** Paraphrasing нашел релевантный ответ ID 98 про стажировку в топ-5, которого не было в baseline.

#### Пример 2: Вопрос про дипломную работу

**Вопрос:** "Получится ли совместить написание дипломной работы с прохождением военных сборов?"

**Baseline:**
1. ID 36 - правильный ответ (score: 0.651)

**Paraphrasing:**
1. ID 36 - правильный ответ (avg_score: 0.613, max_score: 0.623)
2. ID 117, 21, 127, 12 - дополнительные ответы

**Результат:** Правильный ответ остался на первом месте. Paraphrasing нашел дополнительные ответы, включая ID 12.

#### Пример 3: Вопрос про личный кабинет

**Вопрос:** "В личном кабинете иннополиса отсутствует моя программа, из-за чего не могу пройти ассесмент."

**Baseline:**
1. ID 65 - про отклонение заявки (score: 0.657)

**Paraphrasing:**
1. ID 65 - про отклонение заявки (avg_score: 0.575, max_score: 0.600)
2. ID 70 - новый ответ про службу поддержки в ЛК
3. ID 142 - про отчисление и ассесмент
4. ID 69 - новый ответ про техническую поддержку
5. ID 10 - новый ответ про обращение в поддержку

**Результат:** Paraphrasing нашел 3 новых релевантных ответа (ID 70, 69, 10), которые напрямую помогают решить проблему пользователя.

## Выводы

### Что работает

1. **Нахождение новых ответов:** Paraphrasing находит дополнительные релевантные ответы, которых нет в baseline
2. **Стабильность:** Правильные ответы остаются в топе

